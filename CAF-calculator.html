<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCB CAF - AF & TTF äº¨å¼è¨ˆç®—å™¨ </title>
    <style>
        /* åŸºç¤æ¨£å¼è¨­è¨ˆ */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            padding: 0;
            background-color: #f4f7f6;
            color: #333;
        }
        .container {
            max-width: 650px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #0056b3;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        h2 {
            color: #d9534f;
            margin-top: 25px;
            border-bottom: 1px solid #f0ad4e;
            padding-bottom: 5px;
        }
        h3 {
            color: #5cb85c;
            margin-top: 25px;
            border-bottom: 1px solid #5cb85c;
            padding-bottom: 5px;
        }
        .input-group, .constant-group {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .input-group label, .constant-group label {
            flex: 2;
            font-weight: bold;
            margin-right: 15px;
        }
        .input-group input {
            flex: 3;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }
        .constant, .ref-value {
            color: #5a5a5a;
            background-color: #e9ecef;
            padding: 8px;
            border-radius: 5px;
            text-align: center;
            flex: 3;
        }
        .ref-group {
            background-color: #fceceb;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #d9534f;
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #0056b3;
        }
        #result-box {
            margin-top: 30px;
            padding: 20px;
            border: 2px solid #28a745;
            background-color: #e6ffed;
            border-radius: 5px;
            font-size: 1.2em;
            text-align: center;
        }
        #result-value-af {
            font-weight: bold;
            color: #28a745;
            font-size: 1.3em;
            display: block;
        }
        #result-value-ttf {
            font-weight: bold;
            color: #0056b3;
            font-size: 1.8em;
            margin-top: 10px;
            display: block;
        }
        .unit {
            font-size: 0.8em;
            color: #666;
            margin-left: 10px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ”¬ PCB CAF - AF & TTF äº¨å¼è¨ˆç®—å™¨</h1>
    
    <h2>ğŸ”´ åŸºæº–æ¢ä»¶</h2>
    <div class="ref-group">
        <div class="constant-group">
            <label>Layout é–“è· ($L_{ref}$)</label>
            <div class="ref-value">12 mil</div>
        </div>
        <div class="constant-group">
            <label>å·¥ä½œé›»å£“ ($V_{ref}$)</label>
            <div class="ref-value">100 V</div>
        </div>
        <div class="constant-group">
            <label>ç’°å¢ƒæ¿•åº¦ ($RH_{ref}$)</label>
            <div class="ref-value">90 %RH</div>
        </div>
        <div class="constant-group">
            <label>TTF: Time-To-Failure ($TTF_{ref}$)</label>
            <div class="ref-value">45 å°æ™‚</div>
        </div>
    </div>

    <h2>ğŸŸ¢ è¼¸å…¥åƒæ•¸ (å¯¦éš›è¨­è¨ˆèˆ‡ç’°å¢ƒæ¢ä»¶)</h2>

    <div class="input-group">
        <label for="L_current">Layout é–“è· ($L$)</label>
        <input type="number" id="L_current" value="12" step="0.1" required>
        <span class="unit">mil</span>
    </div>

    <div class="input-group">
        <label for="V_current">å·¥ä½œé›»å£“ ($V$)</label>
        <input type="number" id="V_current" value="3.3" step="0.1" required>
        <span class="unit">V</span>
    </div>

    <div class="input-group">
        <label for="RH_current">ç’°å¢ƒæ¿•åº¦ ($RH$)</label>
        <input type="number" id="RH_current" value="70" step="1" required>
        <span class="unit">%RH (0-100)</span>
    </div>

    <h3>å›ºå®šå¸¸æ•¸ (å¯¦é©—èˆ‡æ–‡ç»çµæœ)</h3>

    <div class="constant-group">
        <label>é–“è·å¸¸æ•¸ (n)</label>
        <div class="constant">4.5</div>
    </div>
    
    <div class="constant-group">
        <label for="m_const">é›»å£“å¸¸æ•¸ (m)</label>
        <input type="number" id="m_const" value="2.0" step="0.1" required>
    </div>
    
    <div class="constant-group">
        <label>æ¿•åº¦å¸¸æ•¸ (p)</label>
        <div class="constant">3.51</div>
    </div>
    <div class="constant-group">
        <label>å„²å­˜æ¢ä»¶å¸¸æ•¸ (C)</label>
        <div class="constant">1.6</div>
    </div>

    <button onclick="calculateTTF()">è¨ˆç®—é æœŸ AF & TTF</button>

    <div id="result-box">
        <div style="font-size: 0.9em; margin-bottom: 5px; color: #666;">
        </div>
        CAF åŠ é€Ÿå› å­ (AF): <span id="result-value-af">å¾…è¨ˆç®—...</span>
        <hr>
        é æœŸå¤±æ•ˆæ™‚é–“ (TTF): <span id="result-value-ttf">å¾…è¨ˆç®—...</span>
    </div>

</div>

<script>
    function calculateTTF() {
        // --- ã€é™¤éŒ¯ç¢ºèªé»ã€‘: å¦‚æœç¨‹å¼æˆåŠŸåŸ·è¡Œï¼Œé€™å€‹å½ˆçª—æœƒå‡ºç¾ ---
        // è«‹ç¢ºèªæ‚¨é»æ“ŠæŒ‰éˆ•å¾Œï¼Œæ˜¯å¦æœ‰çœ‹åˆ°é€™å€‹å½ˆçª—ã€‚
        // alert("è¨ˆç®—å‡½æ•¸å·²é–‹å§‹åŸ·è¡Œã€‚");

        // --- 1. åŸºæº–æ¢ä»¶ (Reference Conditions) ---
        const L_ref = 12.0;
        const V_ref = 100.0;
        const RH_ref = 90.0 / 100.0; // è½‰ç‚ºå°æ•¸ (0.9)
        const TTF_ref = 45.0;

        // --- 2. ç²å–ç•¶å‰è¼¸å…¥å€¼ (Current Conditions) ---
        // ä½¿ç”¨ .value å’Œ parseFloat è®€å–è¼¸å…¥æ¡†æ•¸å€¼
        const L_curr = parseFloat(document.getElementById('L_current').value);
        const V_curr = parseFloat(document.getElementById('V_current').value);
        const RH_curr_percent = parseFloat(document.getElementById('RH_current').value);
        const m = parseFloat(document.getElementById('m_const').value); 

        // --- 3. ç²å–å¸¸æ•¸ (Constants) ---
        // å°‡æ‰€æœ‰å¸¸æ•¸ç›´æ¥å¯«å…¥ç¨‹å¼ç¢¼
        const n = 4.5;
        const p = 3.51;
        const C = 1.6;
        

        // --- 4. æª¢æŸ¥è¼¸å…¥æ˜¯å¦æœ‰æ•ˆ ---
        if (isNaN(L_curr) || isNaN(V_curr) || isNaN(RH_curr_percent) || isNaN(m)) {
            document.getElementById('result-value-af').textContent = "è«‹ç¢ºä¿æ‰€æœ‰è¼¸å…¥æ¬„ä½éƒ½å¡«å…¥äº†æœ‰æ•ˆæ•¸å­—ã€‚";
            document.getElementById('result-value-ttf').textContent = "è«‹æª¢æŸ¥è¼¸å…¥ï¼";
            return;
        }

        // è½‰æ› RH ç‚ºå°æ•¸ä¸¦æª¢æŸ¥ç¯„åœ
        const RH_curr = RH_curr_percent / 100.0;
        if (RH_curr <= 0 || RH_curr > 1) {
             // è¼¸å‡ºéŒ¯èª¤è¨Šæ¯åˆ°çµæœæ¬„
            document.getElementById('result-value-af').textContent = "æ¿•åº¦ RH å¿…é ˆåœ¨ 0 åˆ° 100 ä¹‹é–“ã€‚";
            document.getElementById('result-value-ttf').textContent = "æ•¸å€¼éŒ¯èª¤ï¼";
            return;
        }

        try {
            // --- 5. è¨ˆç®—æ¯”å€¼ (Ratios) ---
            // S, V, RH æ¡ç”¨æ‚¨çš„è¦æ±‚: Curr / Ref
            const S_ratio = L_curr / L_ref; 
            const V_ratio = V_curr / V_ref;
            const RH_ratio = RH_curr / RH_ref;

            // --- 6. è¨ˆç®— AF (AF = S^n * V^-m * RH^-p / C) ---
            const S_term = Math.pow(S_ratio, n);
            const V_term = Math.pow(V_ratio, -m); 
            const RH_term = Math.pow(RH_ratio, -p); 

            // AF = (S^n * V^-m * RH^-p) / C
            const AF = (S_term * V_term * RH_term);
            
            // --- 7. è¨ˆç®—é æœŸ TTF (TTF = TTF_ref * AF) ---
            const TTF_predict = TTF_ref * AF; 

            // --- 8. è¼¸å‡ºçµæœ ---
            document.getElementById('result-value-af').textContent = AF.toFixed(0);
            document.getElementById('result-value-ttf').textContent = `${TTF_predict.toFixed(0)} å°æ™‚`;

        } catch (error) {
            // å¦‚æœç™¼ç”Ÿæ•¸å­¸éŒ¯èª¤ï¼ˆä¾‹å¦‚é™¤ä»¥é›¶ï¼‰
            document.getElementById('result-value-af').textContent = `è¨ˆç®—éŒ¯èª¤`;
            document.getElementById('result-value-ttf').textContent = `éŒ¯èª¤: ${error.message}`;
        }
    }
</script>

</body>
</html>
